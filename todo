#!/usr/bin/env node

const {
  listTodos,
  addTodo,
  completeTodo,
  deleteTodo,
  updateTodo,
  findTodos
} = require('./commands')

const cmd = process.argv[2]
const note = process.argv[3]
const task = process.argv[4]

switch (cmd) {
  case 'list':
    return listTodos().then(showResponse)

  case 'add':
    return addTodo(note).then(showResponse)

  case 'complete':
    return completeTodo(note).then(showResponse)

  case 'search':
    return findTodos(note).then(showResponse)

  case 'update':
    return updateTodo(note, task).then(showResponse)

  case 'delete':
    return deleteTodo(note).then(showResponse)

  default:
    console.log('Unknown command:', cmd)
}

function showResponse (response) {
  // eslint-disable-next-line no-console
  console.info(response)
}
